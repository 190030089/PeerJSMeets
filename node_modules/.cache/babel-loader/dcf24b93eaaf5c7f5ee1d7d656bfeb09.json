{"ast":null,"code":"var _jsxFileName = \"/Users/yashwanthreddyanumula/Documents/Projects/peerjs-example/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport Peer from 'peerjs';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [peerId, setPeerId] = useState('');\n  const [remotePeerIdValue, setRemotePeerIdValue] = useState('');\n  const remoteVideoRef = useRef(null);\n  const currentUserVideoRef = useRef(null);\n  const peerInstance = useRef(null);\n  useEffect(() => {\n    const peer = new Peer();\n    peer.on('open', id => {\n      setPeerId(id);\n    });\n    peer.on('call', call => {\n      var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n      getUserMedia({\n        video: true,\n        audio: true\n      }, mediaStream => {\n        currentUserVideoRef.current.srcObject = mediaStream;\n        currentUserVideoRef.current.play();\n        call.answer(mediaStream);\n        call.on('stream', function (remoteStream) {\n          remoteVideoRef.current.srcObject = remoteStream;\n          remoteVideoRef.current.play();\n        });\n      });\n    });\n    peerInstance.current = peer;\n  }, []);\n\n  const call = remotePeerId => {\n    var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n    getUserMedia({\n      video: true,\n      audio: true\n    }, mediaStream => {\n      currentUserVideoRef.current.srcObject = mediaStream;\n      currentUserVideoRef.current.play();\n      const call = peerInstance.current.call(remotePeerId, mediaStream);\n      call.on('stream', remoteStream => {\n        remoteVideoRef.current.srcObject = remoteStream;\n        remoteVideoRef.current.play();\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Current user id is \", peerId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: remotePeerIdValue,\n      onChange: e => setRemotePeerIdValue(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => call(remotePeerIdValue),\n      children: \"Call\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: currentUserVideoRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: remoteVideoRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"SeAon4Ls3sczUX4epmPJRhu3tS0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/yashwanthreddyanumula/Documents/Projects/peerjs-example/src/App.js"],"names":["useEffect","useRef","useState","Peer","App","peerId","setPeerId","remotePeerIdValue","setRemotePeerIdValue","remoteVideoRef","currentUserVideoRef","peerInstance","peer","on","id","call","getUserMedia","navigator","webkitGetUserMedia","mozGetUserMedia","video","audio","mediaStream","current","srcObject","play","answer","remoteStream","remotePeerId","e","target","value"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport Peer from 'peerjs';\nimport './App.css';\n\nfunction App() {\n  const [peerId, setPeerId] = useState('');\n  const [remotePeerIdValue, setRemotePeerIdValue] = useState('');\n  const remoteVideoRef = useRef(null);\n  const currentUserVideoRef = useRef(null);\n  const peerInstance = useRef(null);\n\n  useEffect(() => {\n    const peer = new Peer();\n\n    peer.on('open', (id) => {\n      setPeerId(id)\n    });\n\n    peer.on('call', (call) => {\n      var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n      getUserMedia({ video: true, audio: true }, (mediaStream) => {\n        currentUserVideoRef.current.srcObject = mediaStream;\n        currentUserVideoRef.current.play();\n        call.answer(mediaStream)\n        call.on('stream', function(remoteStream) {\n          remoteVideoRef.current.srcObject = remoteStream\n          remoteVideoRef.current.play();\n        });\n      });\n    })\n\n    peerInstance.current = peer;\n  }, [])\n\n  const call = (remotePeerId) => {\n    var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n    getUserMedia({ video: true, audio: true }, (mediaStream) => {\n\n      currentUserVideoRef.current.srcObject = mediaStream;\n      currentUserVideoRef.current.play();\n\n      const call = peerInstance.current.call(remotePeerId, mediaStream)\n\n      call.on('stream', (remoteStream) => {\n        remoteVideoRef.current.srcObject = remoteStream\n        remoteVideoRef.current.play();\n      });\n    });\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Current user id is {peerId}</h1>\n      <input type=\"text\" value={remotePeerIdValue} onChange={e => setRemotePeerIdValue(e.target.value)} />\n      <button onClick={() => call(remotePeerIdValue)}>Call</button>\n      <div>\n        <video ref={currentUserVideoRef} />\n      </div>\n      <div>\n        <video ref={remoteVideoRef} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}